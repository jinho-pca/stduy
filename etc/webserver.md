# Web Server

------

## Index

- Game
- HTTP
- Client
- Attack
- Server Programming

------

### 1. Game

#### (1) 싱글 게임

- 개발자는 language를 사용해 궁극적으로 메모리에 저장되는 값을 제어하며 원하는 기능
- 치트엔진은 게임 장치의 값을 편집

#### (2) 온라인 게임 서버

- 우선순위 (서버 데이터 > 클라이언트 데이터)
- 문제점치트 엔진같은 불법프로그램을 이용한 치팅 막기 위해메모리 변조보스 몹에게 가해지는 데미지는 순수하게 클라이언트에서 계산?메모리 스캔해서 값을 바꾸는 치트엔진과 에디터로 저작하면 안 된다클라이언트 의심의 중요성

#### (3) 클라이언트

- 서버의 능동적 대처 필요

------

### 2. HTTP

#### (1) HTTP

- Hyper Text Transfer Protocol
- 모든 데이터 교환의 기초
- 클라이언트-서버 프로토콜

#### (2) 특징

- Stateless 상태를 저장하지 않음
- HTTP 서버는 불특정 다수 요청 전제

#### (3) Stateless

- 클라이언트 구분 불가
- HTTP 쿠키는 상태가 있는 세션을 만들도록 해준다
- 통신이 끝나면 상태 유지를 하지 않음

#### (4) 불특정 다수 요청

- 사용자 클라이언트 인증
- 서버 중심의 견고한 로직 처리
- 사용자 요청의 유효성 검증
- Sql Injection, XSS 방어

------

### 3. Client

#### (1) 파일 업로드

- 현대카드 사례
- 게시판 파일 업로드 기능
- '.jsp' 파일 업로드 허용
- '.jsp' 파일 내에 특정 테이블 조회 기능 구현

#### (2) jwt 토큰

- 로그인 회원가입 유효성 검증
- 서버 이메일 및 아이디 중복 확인
- jwt 토큰 발급

------

### 4. Attack

#### (1) Sql Injection

- 클라이언트의 입력 값은 DB query > where 조건문의 일부로 사용 

- ORM, Mapper

  SQL

  1 2 3 4

  `select * from USERS where id='user1' and pw='pw1'; select * from USERS where id='' or 1=1 -- and pw='pw1';`

- `or 1=1` 테스트

#### (2) Dos 공격

- 클라이언트 Http 요청의 첫 진입인 nginx
- 첫 진입점이 웹 서버 nginx 공격 방어 기능

#### (3) XSS

- Cross Site Scripting

  Java

  1

  <script>악의적인 해커의 url로 주요 정보 전송</script>

- 정규표현식으로 구성된 경우 쉽게 처리

------

### 5. Server Programming

#### (1) 나를 의심 (Server)

- 1이 아닌 N개의 클라이언트 요청
- 적당한 응답 시간과 데이터 신뢰성응답시간JMeter와 같은 도구로 부하테스트요청 응답 시간을 줄이기 위해 캐시 Layer 고려데이터 신뢰성Multi thread 환경에서의 concurrency (thread safe)SELECT FOR UPDATE 문 등으로 명시적 lock 부여특정 row에 대해 동시 트랜잭션이 발생하여 데이터 정합성 깨지는 것 방지
- 업무 트랜잭션 처리 여부쇼핑몰 결제의 복수 개 수단으로 진행문화상품권, 신용카드 및 쇼핑몰 포인트하나가 실패하더라도 전체 결제 트랜잭션 실팬
- 서비스 및 컨텐츠(리소스) 사용 권한
- 주요 데이터 암호화

#### (2) 너를 의심 (Client)

- 사용자 클라이언트 인증
- 서버 중심의 견고한 로직 처리
- 사용자 요청의 유효성 검증
- Sql Injection, XSS 방어

#### (3) logging

> 돌려보고 생각대로 안 움직이면 디버깅 걸고 한 줄 한 줄 확인하고 사용하는 라이브러리가 있다면 오류 잘 보고 하나씩 해결하는 것

- 서버가 작동하면서 발생하는 주요 이슈들을 기록
- 단순 콘솔 출력보다는 주요 logger(라이브러리) 사용Java에서 사용하는 로그 라이브러리 log4jC#에서 사용하는 log4net
- 서버 운영시 발생한 이슈 추적의 시작점
- 효율적인 로깅 구축
- 주요 액티비티 로깅
- 익셉션 및 에러로깅

#### (4) 서버 테스트 시나리오

- 복수개의 요청은 수행해봐야 함
- 눈에 보이지 않는 비기능 요소에 대한 테스트 시나리오
- 테스트 할 내용을 안다는 것이 SW 역량

(수정됨)